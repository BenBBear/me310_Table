var fs, request;

request = require('request');

fs = require('fs');

module.exports = {
    search: function(option, cb) {
        cb = cb || function(){};
        var query;
        if (typeof option === 'object') {
            query = option["for"];
        }
        if (typeof option === 'string') {
            query = option;
            option = {};
        }
        option.page = option.page || 0;

        return request("https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=" + (query.replace(/\s/g, '+')) + "&start=" + option.page + "&rsz=", option.rsz, function(err, res, body) {
            var images, item, items, _i, _len;
            items = JSON.parse(body).responseData.results;
            images = [];
            for (_i = 0, _len = items.length; _i < _len; _i++) {
                item = items[_i];
                images.push({
                    width: item.width,
                    height: item.height,
                    unescapedUrl: item.unescapedUrl,
                    url: item.url
                });
            }
            console.log(images);
            cb(false, images);
        });
    }
};
